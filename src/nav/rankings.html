<!DOCTYPE html>
<html lang="it">

<head>
  <meta charset="UTF-8" />
  <title>STREETB4LL '25</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    @font-face {
      font-family: 'Grashrock';
      src: url('../assets/fonts/Grashrock.ttf') format('truetype');
    }

    body {
      font-family: Arial, sans-serif;
      background-color:#ddd;
      overflow: auto;
      height: 100vh;
      display: flex;
      flex-direction: column;
    }

    .main-container {
      display: flex;
      flex: 1;
      padding: 10px 20px 0 20px;
      gap: 20px;
      opacity: 0.80;
    }

    .rankings {
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    h2 {
      font-family: 'Grashrock', sans-serif;
      font-size: 80px;
      text-align: center;
      margin-bottom: 10px;
      padding: 50px 0px 25px 0px;
    }

    .rankings table {
      width: 100%;
      border-collapse: collapse;
      font-size: 16px;
    }

    th,
    td {
      border: 1px solid #ddd;
      padding: 6px;
      text-align: center;
    }

    th {
      background-color: #f2f2f2;
    }

    .rankings-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      flex: 1;
    }

    .banner {
      height: 130px;
      background: white;
      overflow: hidden;
      /* Importante per nascondere lo scorrimento */
      position: relative;
    }

    .sponsor-slide {
      display: flex;
      width: fit-content;
      animation: scroll-left 30s linear infinite;
    }

    .scroll-wrapper {
      display: flex;
      width: max-content;
    }

    .sponsor-slide img {
      height: 110px;
      padding-top: 20px;
      margin: 0 25px;
      object-fit: contain;
    }

@keyframes liveGlow {
  0%, 100% {
    box-shadow: 0 0 8px 3px rgba(255, 0, 0, 0.7);
  }
  50% {
    box-shadow: 0 0 20px 8px rgba(255, 0, 0, 1);
  }
}

.live-cell {
  animation: liveGlow 1.5s infinite ease-in-out;
  /* Mantieni background originale: non lo tocchiamo */
  color: inherit; /* lascia il colore testo di default */
  font-weight: bold;
  border-radius: 6px;
  padding: 4px 8px;
  position: relative;
  z-index: 0; /* assicura stacking */
}


    @keyframes scroll-left {
      0% {
        transform: translateX(0);
      }
      100% {
        transform: translateX(-50%);
      }
    }
  </style>
</head>

<body>
  <div class="main-container">
    <div class="rankings">
      <h2>Classifiche</h2>
      <div class="rankings-grid">
        <div id="ranking-open-maschile"></div>
        <div id="ranking-open-femminile"></div>
        <div id="ranking-under-17"></div>
        <div id="ranking-under-14"></div>
      </div>
    </div>
  </div>

  <div class="banner">
    <div class="sponsor-slide">
      <div class="scroll-wrapper">
        <!-- Sponsor singola sequenza -->
        <img src="../assets/images/COMUNE.png" alt="Comune" style="margin-left: 20px; margin-right: 150px;" />
        <img src="../assets/images/1.png" alt="Sponsor 1" />
        <img src="../assets/images/2.png" alt="Sponsor 2" />
        <img src="../assets/images/3.png" alt="Sponsor 3" />
        <img src="../assets/images/4.png" alt="Sponsor 4" />
        <img src="../assets/images/5.png" alt="Sponsor 5" />
        <img src="../assets/images/6.png" alt="Sponsor 6" />
        <img src="../assets/images/7.png" alt="Sponsor 7" />
        <img src="../assets/images/8.png" alt="Sponsor 8" />
        <img src="../assets/images/9.png" alt="Sponsor 9" />
        <img src="../assets/images/10.png" alt="Sponsor 10" />
        <img src="../assets/images/FIP.png" alt="FIP" style="margin-left: 150px; margin-right: 20px;" />

        <!-- Duplicazione automatica per continuitÃ  -->
        <img src="../assets/images/COMUNE.png" alt="Comune" style="margin-left: 20px; margin-right: 150px;" />
        <img src="../assets/images/1.png" alt="Sponsor 1" />
        <img src="../assets/images/2.png" alt="Sponsor 2" />
        <img src="../assets/images/3.png" alt="Sponsor 3" />
        <img src="../assets/images/4.png" alt="Sponsor 4" />
        <img src="../assets/images/5.png" alt="Sponsor 5" />
        <img src="../assets/images/6.png" alt="Sponsor 6" />
        <img src="../assets/images/7.png" alt="Sponsor 7" />
        <img src="../assets/images/8.png" alt="Sponsor 8" />
        <img src="../assets/images/9.png" alt="Sponsor 9" />
        <img src="../assets/images/10.png" alt="Sponsor 10" />
        <img src="../assets/images/FIP.png" alt="FIP" style="margin-left: 150px; margin-right: 20px;" />
      </div>
    </div>
  </div>

  <script>
    async function fetchCSV(url) {
      const response = await fetch(url);
      const text = await response.text();
      return text.trim().split("\n").map(row => row.split(","));
    }

  


    function renderRankingTable(data, containerId) {
      const container = document.getElementById(containerId);
      const table = document.createElement("table");

      const thead = document.createElement("thead");
      const headerRow = document.createElement("tr");
      for (let i = 0; i < data[0].length - 1; i++) {
        const th = document.createElement("th");
        th.textContent = data[0][i];
        headerRow.appendChild(th);
      }
      thead.appendChild(headerRow);
      table.appendChild(thead);

      const tbody = document.createElement("tbody");
      data.slice(1).forEach(row => {
        const tr = document.createElement("tr");
        const color = row[row.length - 1];
        if (color) tr.style.backgroundColor = color;
        for (let i = 0; i < row.length - 1; i++) {
          const td = document.createElement("td");
          td.textContent = row[i];
          tr.appendChild(td);
        }
        tbody.appendChild(tr);
      });

      table.appendChild(tbody);
      container.innerHTML = "";
      container.appendChild(table);
    }

    const classifiche = {
      "ranking-open-maschile": "https://docs.google.com/spreadsheets/d/e/2PACX-1vSR53eUzgnaH3Fn_E7uDR7gxuKolf2VuxO7Kp3c6z6SlgptNJWhWDcBGARhjQbK83qxmu6AGzXrpG_e/pub?gid=0&single=true&output=csv",
      "ranking-open-femminile": "https://docs.google.com/spreadsheets/d/e/2PACX-1vSR53eUzgnaH3Fn_E7uDR7gxuKolf2VuxO7Kp3c6z6SlgptNJWhWDcBGARhjQbK83qxmu6AGzXrpG_e/pub?gid=112140575&single=true&output=csv",
      "ranking-under-17": "https://docs.google.com/spreadsheets/d/e/2PACX-1vSR53eUzgnaH3Fn_E7uDR7gxuKolf2VuxO7Kp3c6z6SlgptNJWhWDcBGARhjQbK83qxmu6AGzXrpG_e/pub?gid=909698791&single=true&output=csv",
      "ranking-under-14": "https://docs.google.com/spreadsheets/d/e/2PACX-1vSR53eUzgnaH3Fn_E7uDR7gxuKolf2VuxO7Kp3c6z6SlgptNJWhWDcBGARhjQbK83qxmu6AGzXrpG_e/pub?gid=724036286&single=true&output=csv"
    };

    window.addEventListener("DOMContentLoaded", async () => {
      
      for (const [id, url] of Object.entries(classifiche)) {
        const data = await fetchCSV(url);
        renderRankingTable(data, id);
      }
    });
  </script>
</body>

</html>